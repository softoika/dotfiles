alias ls='ls --color=auto'
alias ll='ls -l'
alias vi='vim'
alias svi='sudo vim -u $SSHHOME/.sshrc.d/.vimrc'
alias tr='tmuxrc'
alias foo='echo bar'
alias ssh='sshrc'
alias sc='systemctl'
export VIMINIT="let \$MYVIMRC='$SSHHOME/.sshrc.d/.vimrc' | source \$MYVIMRC"
export SHELL=`which bash`

tmuxrc() {
    change_tmux_prefix
    local TMUXDIR=/tmp/hanafusa_tmux
    if ! [ -d $TMUXDIR ]; then
        rm -rf $TMUXDIR
        mkdir -p $TMUXDIR
    fi
    rm -rf $TMUXDIR/.sshrc.d
    \cp -f $SSHHOME/.sshrc $SSHHOME/bashsshrc $SSHHOME/sshrc -r $SSHHOME/.sshrc.d $TMUXDIR
    SSHHOME=$TMUXDIR SHELL=$TMUXDIR/bashsshrc /usr/bin/tmux -S $TMUXDIR/tmuxserver $@
}

surc () {
    [ "$1" = "-" ] && shift
    local USER="$1"
    local DISTRIB_ID=""
    if [ -r "/etc/lsb-release" ]; then
        DISTRIB_ID="$(awk -F'=' '$1 == "DISTRIB_ID" { print $2 }' /etc/lsb-release 2>/dev/null)"
    fi
    [ -z "${USER}" ] && USER="root"
    chmod +x "${SSHHOME}" 2>/dev/null
    if [ "${DISTRIB_ID}" = "Ubuntu" ]; then
        sudo -u "${USER}" SSHHOME="${SSHHOME}" "${SSHHOME}/bashsshrc"
    else
        (
            export SSHHOME
            sudo -E su -s "${SSHHOME}/bashsshrc" "${USER}"
        )
    fi
}

